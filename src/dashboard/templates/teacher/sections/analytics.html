<h2 class="mb-4">Analytics & Reports</h2>

<div class="row mb-4">
    <div class="col-md-3 mb-3">
        <div class="dashboard-card p-3 text-center">
            <h3 class="stat-number text-success">{{ analytics.avg_submission_rate|default:"0" }}%</h3>
            <p class="stat-title">Avg Submission Rate</p>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="dashboard-card p-3 text-center">
            <h3 class="stat-number text-info">{{ analytics.avg_gpa|default:"0" }}</h3>
            <p class="stat-title">Avg GPA</p>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="dashboard-card p-3 text-center">
            <h3 class="stat-number text-warning">{{ analytics.at_risk_students|default:"0" }}</h3>
            <p class="stat-title">At Risk Students</p>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="dashboard-card p-3 text-center">
            <h3 class="stat-number text-primary">{{ analytics.attendance_rate|default:"0" }}%</h3>
            <p class="stat-title">Attendance Rate</p>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-8 mb-4">
        <div class="dashboard-card p-4">
            <h5 class="mb-3">Performance Overview</h5>
            <div class="bg-light p-4 rounded text-center">
                <i class="bi bi-bar-chart-line display-4 text-muted mb-3"></i>
                <p class="text-muted">Chart placeholder - Performance trends over time</p>
            </div>
        </div>
    </div>
    <div class="col-lg-4 mb-4">
        <div class="dashboard-card p-4">
            <h5 class="mb-3">Grade Distribution</h5>
            <div class="bg-light p-4 rounded text-center">
                <i class="bi bi-pie-chart display-4 text-muted mb-3"></i>
                <p class="text-muted">Chart placeholder - Grade distribution pie chart</p>
            </div>
        </div>
    </div>
</div>

<div class="dashboard-card p-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5>Course Performance Comparison</h5>
        <div>
            <button class="btn btn-outline-primary btn-sm me-2">
                <i class="bi bi-download me-1"></i>Export Report
            </button>
            <select class="form-select form-select-sm d-inline-block w-auto">
                <option>Last 30 days</option>
                <option>Last 3 months</option>
                <option>Current semester</option>
            </select>
        </div>
    </div>
    <div class="table-responsive">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Course</th>
                    <th>Students</th>
                    <th>Avg Grade</th>
                    <th>Submission Rate</th>
                    <th>Engagement</th>
                </tr>
            </thead>
            <tbody>
                {% for course in course_performance %}
                <tr>
                    <td><strong>{{ course.name }}</strong></td>
                    <td>{{ course.student_count }}</td>
                    <td>{{ course.avg_grade }}</td>
                    <td>{{ course.submission_rate }}%</td>
                    <td><span class="badge bg-{{ course.engagement_color }}">{{ course.engagement }}</span></td>
                </tr>
                {% empty %}
                <tr>
                    <td><strong>CS-301 Data Structures</strong></td>
                    <td>42</td>
                    <td>B+ (3.3)</td>
                    <td>92%</td>
                    <td><span class="badge bg-success">High</span></td>
                </tr>
                <tr>
                    <td><strong>CS-305 Database Systems</strong></td>
                    <td>38</td>
                    <td>B (3.0)</td>
                    <td>87%</td>
                    <td><span class="badge bg-warning">Medium</span></td>
                </tr>
                <tr>
                    <td><strong>CS-220 Web Development</strong></td>
                    <td>35</td>
                    <td>A- (3.7)</td>
                    <td>94%</td>
                    <td><span class="badge bg-success">High</span></td>
                </tr>
                <tr>
                    <td><strong>CS-410 Operating Systems</strong></td>
                    <td>28</td>
                    <td>B- (2.7)</td>
                    <td>89%</td>
                    <td><span class="badge bg-warning">Medium</span></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
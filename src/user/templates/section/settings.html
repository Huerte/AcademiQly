{% extends 'base.html' %}
{% load static %}

{% block title %}Settings{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row">
        {% include 'section/components/settings_sidebar.html' %}

        <div class="col-12 col-lg-9">
            {% include 'section/components/account_section.html' %}
            {% include 'section/components/profile_section.html' %}
            {% include 'section/components/academic_section.html' %}
            {% include 'section/components/password_section.html' %}
            {% include 'section/components/danger_section.html' %}
        </div>
    </div>
</div>
{% endblock %}

{% block modals %}
{% include 'section/components/delete_account_modal.html' %}
{% endblock %}

{% block extra_css %}
<style>
.profile-picture-container {
    transition: all 0.3s ease;
}

.profile-picture-container:hover {
    transform: translateY(-2px);
}

#profileImagePreview {
    transition: all 0.3s ease;
    border: 3px solid #fff;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

#profileImagePreview:hover {
    box-shadow: 0 6px 20px rgba(0,0,0,0.2);
}

.upload-btn {
    transition: all 0.2s ease;
}

.upload-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.toast-container {
    z-index: 9999;
}

.form-control:focus {
    border-color: #0d6efd;
    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}

.card {
    transition: all 0.3s ease;
}

.card:hover {
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
</style>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const navItems = document.querySelectorAll('.settings-nav');
    const sections = document.querySelectorAll('.settings-section');
    
    navItems.forEach(item => {
        item.addEventListener('click', function(e) {
            e.preventDefault();
            
            navItems.forEach(nav => nav.classList.remove('active'));
            
            this.classList.add('active');
            
            sections.forEach(section => section.classList.add('d-none'));
            
            const targetSection = this.getAttribute('data-section') + '-section';
            document.getElementById(targetSection).classList.remove('d-none');
        });
    });
    
    const hash = window.location.hash.substring(1);
    if (hash) {
        const targetNav = document.querySelector(`[data-section="${hash}"]`);
        if (targetNav) {
            targetNav.click();
        }
    }
});

function previewImage(input) {
    if (input.files && input.files[0]) {
        const reader = new FileReader();
        
        reader.onload = function(e) {
            const preview = document.getElementById('profileImagePreview');
            if (preview) {
                preview.src = e.target.result;
                
                preview.style.transform = 'scale(1.05)';
                setTimeout(() => {
                    preview.style.transform = 'scale(1)';
                }, 200);
            }
        };
        
        reader.readAsDataURL(input.files[0]);
    }
}

document.addEventListener('DOMContentLoaded', function() {
    const fileInput = document.getElementById('profilePictureInput');
    if (fileInput) {
        fileInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                if (!file.type.startsWith('image/')) {
                    showToast('Please select an image file', 'error');
                    this.value = '';
                    return;
                }
            }
        });
    }
});
</script>
{% endblock %}


